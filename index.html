<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Agenda de Limpezas</title>
  <style>
    :root{
      --azul:#0056A4;
      --verde:#00A428;
      --bg:#f6f8fb;
      --card:#ffffff;
      --text:#00325e;a
    }
    *{box-sizing:border-box}
    body{
      font-family:Inter, Arial, sans-serif;
      margin:16px;
      background:var(--bg);
      color:var(--text);
    }
    header{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:16px;
    }
    .logo{height:52px}
    h1{margin:0;color:var(--azul);font-size:1.25rem}
    .controls{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom:12px;
    }
    .card{
      background:var(--card);
      padding:14px;
      border-radius:10px;
      box-shadow:0 1px 6px rgba(0,0,0,0.06);
    }
    .tabs{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-bottom:12px;
    }
    .tab{
      padding:8px 12px;
      border-radius:8px;
      border:1px solid #e6eef8;
      background:transparent;
      color:var(--text);
      cursor:pointer;
      font-weight:600;
    }
    .tab.active{
      background:var(--azul);
      color:#fff;
      border-color:var(--azul);
    }
    .filter-block{
      display:flex;
      flex-direction:column;
      gap:6px;
      font-size:.9rem;
    }
    .filter-row{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    .month-input{
      padding:6px;
      border-radius:6px;
      border:1px solid #d3dbe8;
    }
    .chips{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:5px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid #d3dbe8;
      background:#f3f6fb;
      font-size:.8rem;
      cursor:pointer;
    }
    .table-wrap{
      overflow:auto;
      margin-top:12px;
    }
    table{
      width:100%;
      border-collapse:collapse;
      table-layout:fixed;
      min-width:760px;
    }
    th,td{
      padding:9px 10px;
      border-bottom:1px solid #eef4fb;
      text-align:center;
      font-size:.95rem;
    }
    /* larguras proporcionais */
    th:nth-child(1),td:nth-child(1){width:12%;}  /* Data */
    th:nth-child(2),td:nth-child(2){width:26%;}  /* Cliente / Loja */
    th:nth-child(3),td:nth-child(3){width:28%;}  /* Equipamento */
    th:nth-child(4),td:nth-child(4){width:10%;}  /* Status */
    th:nth-child(5),td:nth-child(5){width:14%;}  /* Obs */
    th:nth-child(6),td:nth-child(6){width:10%;}  /* Link do RelatÃ³rio */
    th{
      background:var(--verde);
      color:#fff;
      position:sticky;
      top:0;
    }
    .empty{
      padding:12px;
      color:#666;
      font-style:italic;
    }
    .btn{
      padding:6px 10px;
      border-radius:8px;
      border:0;
      cursor:pointer;
    }
    a{
      color:var(--azul);
      text-decoration:none;
      font-weight:600;
    }
  
    @media (max-width: 768px){
      body{
        margin:8px;
      }
      header{
        flex-direction:column;
        align-items:flex-start;
        gap:6px;
      }
      .logo{
        height:40px;
      }
      h1{
        font-size:1.1rem;
      }
      .controls{
        flex-direction:column;
      }
      .filter-row{
        flex-direction:row;
        flex-wrap:wrap;
      }
      .month-input{
        width:100%;
        max-width:240px;
      }
      .chips{
        flex-wrap:wrap;
      }
      .table-wrap{
        margin-top:8px;
      }
      th,td{
        font-size:.8rem;
        padding:6px 4px;
      }
    }

</style>
</head>
<body>
<header>
  <img class="logo" src="logo-redefrigor.png" alt="REDEFRIGOR">
  <div>
    <h1>Agenda de Limpezas</h1>
  </div>
</header>

<div class="card">
  <div class="controls">
    <div class="filter-block">
      <span style="font-weight:600">PerÃ­odo</span>
      <div class="filter-row">
        <label for="monthFilter">MÃªs:</label>
        <input id="monthFilter" class="month-input" type="month" />
        <button id="showAllBtn" class="btn">Mostrar todos</button>
      </div>
    </div>

    <div class="filter-block">
      <span style="font-weight:600">Tipo de limpeza</span>
      <div class="chips">
        <label class="chip"><input type="checkbox" id="chkEvap" checked /> Evaporador</label>
        <label class="chip"><input type="checkbox" id="chkCond" checked /> Condensador</label>
        <label class="chip"><input type="checkbox" id="chkIlha" checked /> Ilha ICF</label>
      </div>
    </div>
  </div>

  <div style="margin-top:12px">
    <div class="tabs" id="clientTabs"></div>
  </div>

  <div class="table-wrap card" style="margin-top:12px">
    <table>
      <thead>
        <tr>
          <th>Data</th>
          <th>Cliente / Loja</th>
          <th>Equipamento</th>
          <th>Status</th>
          <th>Obs</th>
          <th>Link do RelatÃ³rio</th>
        </tr>
      </thead>
      <tbody id="scheduleBody"></tbody>
    </table>
    <div id="emptyMsg" class="empty" style="display:none">Nenhuma agenda encontrada.</div>
  </div>
</div>

<script>
// DADOS EMBUTIDOS GERADOS A PARTIR DA PLANILHA
const data = [
  {
    "date": "2025-12-11",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Evaporador",
    "equipamento": "Evaporador - SP Frios",
    "status": "A fazer",
    "notes": "",
    "relatorio": "https://app.auvo.com.br/informacoes/tarefa/a22a422b-6cd4-471c-a56b-faca043cd495?chave=H4B-r6DULrQbxYKg5Qavug"
  },
  {
    "date": "2025-12-12",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Evaporador",
    "equipamento": "Evaporador - Walk in 01",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-13",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Evaporador",
    "equipamento": "Evaporador - Walk in 02",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-14",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Evaporador",
    "equipamento": "Evaporador - SP FLV",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-15",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Evaporador",
    "equipamento": "Evaporador - CFR Frutas",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-16",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Evaporador",
    "equipamento": "Evaporador - CFR Hortifruti",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-17",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Evaporador",
    "equipamento": "Evaporador - SP Frios",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-18",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Evaporador",
    "equipamento": "Evaporador - CFR Frios",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-19",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Evaporador",
    "equipamento": "Evaporador - CFR Padaria",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-20",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Evaporador",
    "equipamento": "Evaporador - SP AÃ§ougue",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-21",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Evaporador",
    "equipamento": "Evaporador - CFR Tendal",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-22",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 01 - AÃ§ougue",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-23",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 02 - AÃ§ougue",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-24",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 03 - AÃ§ougue",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-25",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 04 - AÃ§ougue",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-26",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 05 - AÃ§ougue",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-27",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 06 - AÃ§ougue",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-28",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 07 - AÃ§ougue",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-29",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 08 - AÃ§ougue",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-30",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 01 - Frios",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2025-12-31",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 02 - Frios",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2026-01-01",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 03 - Frios",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2026-01-02",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 04 - Frios",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2026-01-03",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 05 - Frios",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2026-01-04",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 06 - Frios",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2026-01-05",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 07 - Frios",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2026-01-06",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 08 - Frios",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2026-01-07",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 09 - Frios",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  },
  {
    "date": "2026-01-08",
    "client": "C-Vale CaarapÃ³ (contrato)",
    "unit": "",
    "tipo": "Ilha ICF",
    "equipamento": "Ilha ICF 10 - Frios",
    "status": "A fazer",
    "notes": "",
    "relatorio": ""
  }
];

const monthFilter = document.getElementById('monthFilter');
const clientTabs  = document.getElementById('clientTabs');
const scheduleBody = document.getElementById('scheduleBody');
const emptyMsg    = document.getElementById('emptyMsg');
const showAllBtn  = document.getElementById('showAllBtn');
const chkEvap     = document.getElementById('chkEvap');
const chkCond     = document.getElementById('chkCond');
const chkIlha     = document.getElementById('chkIlha');

let state = { client:'Todos', month:'', showAll:false, types:{evap:true,cond:true,ilha:true} };

// inicializa mÃªs atual
(function initMonth(){
  const hoje = new Date();
  monthFilter.value = hoje.getFullYear() + '-' + String(hoje.getMonth()+1).padStart(2,'0');
  state.month = monthFilter.value;
})();

function distinctClients(arr){
  const s = new Set(arr.map(r=>r.client));
  return ['Todos', ...Array.from(s)];
}
function formatDateBr(iso){
  if(!iso) return '';
  const parts = iso.split('-');
  if(parts.length !== 3) return iso;
  return parts[2] + '/' + parts[1] + '/' + parts[0];
}

function renderTabs(){
  clientTabs.innerHTML='';
  const clients = distinctClients(data);
  clients.forEach(c=>{
    const btn = document.createElement('button');
    btn.className = 'tab' + (state.client===c ? ' active' : '');
    btn.textContent = c;
    btn.onclick = ()=>{ state.client = c; render(); };
    clientTabs.appendChild(btn);
  });
}

function matchesType(row){
  const t = state.types;
  const anySelected = t.evap || t.cond || t.ilha;
  if(!anySelected) return true;
  if(t.evap && row.tipo === 'Evaporador') return true;
  if(t.cond && row.tipo === 'Condensador') return true;
  if(t.ilha && row.tipo === 'Ilha ICF') return true;
  return false;
}

function matchesFilters(row){
  if(state.client !== 'Todos' && row.client !== state.client) return false;
  if(!state.showAll && state.month){
    const rowMonth = row.date ? row.date.slice(0,7) : '';
    if(rowMonth !== state.month) return false;
  }
  if(!matchesType(row)) return false;
  return true;
}

function render(){
  renderTabs();
  scheduleBody.innerHTML = '';
  const filtered = data.filter(matchesFilters);
  if(filtered.length === 0){
    emptyMsg.style.display = 'block';
    return;
  } else {
    emptyMsg.style.display = 'none';
  }
  filtered.forEach(r=>{
    const tr = document.createElement('tr');
    tr.innerHTML =
      '<td>' + (formatDateBr(r.date) || '') + '</td>' +
      '<td>' + (r.client || '') + '</td>' +
      '<td>' + (r.equipamento || '') + '</td>' +
      '<td>' + (r.status || '') + '</td>' +
      '<td>' + (r.notes || '') + '</td>' +
      '<td>' + (r.relatorio ? '<a href="' + r.relatorio + '" target="_blank">Abrir</a>' : 'â€”') + '</td>';
    scheduleBody.appendChild(tr);
  });
}

monthFilter.addEventListener('change', ()=>{
  state.month = monthFilter.value;
  state.showAll = false;
  render();
});
showAllBtn.addEventListener('click', ()=>{
  state.showAll = !state.showAll;
  render();
});
chkEvap.addEventListener('change', ()=>{ state.types.evap = chkEvap.checked; render(); });
chkCond.addEventListener('change', ()=>{ state.types.cond = chkCond.checked; render(); });
chkIlha.addEventListener('change', ()=>{ state.types.ilha = chkIlha.checked; render(); });

// primeira renderizaÃ§Ã£o
render();
</script>
</body>
</html>
